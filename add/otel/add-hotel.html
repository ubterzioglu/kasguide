<!DOCTYPE html>
<html lang="tr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Oteli Ekle â€¢ KaÅŸ Guide Hotels</title>
  <link rel="icon" type="image/png" href="../../assets/0_img/logokasguide.png">
  <link rel="stylesheet" href="./add-hotel.css">
</head>
<body>

  <header class="topbar">
    <div class="container topbar__inner">
      <a class="brand" href="../index.html" aria-label="KaÅŸ Guide">
        <div class="brand__title">KaÅŸ Guide Hotels</div>
        <div class="brand__subtitle">Otelinizi Ekleyin</div>
      </a>
    </div>
  </header>

  <main class="container">
    <section class="page-head">
      <h1>ğŸ¨ Otelinizi KaÅŸ Guide'a Ekleyin</h1>
      <p class="muted">KaÅŸ'taki otelinizi binlerce gezgine tanÄ±tÄ±n, rezervasyon linklerinizi paylaÅŸÄ±n</p>
    </section>

    <!-- INFO / ACCORDIONS -->
    <section class="info-section">
      <details class="accordion-item accordion info-acc" open>
        <summary class="section-title">
          <span class="section-icon icon-glow">ğŸ¨</span>
          KaÅŸ Guide Hotels HakkÄ±nda
        </summary>

        <div class="liste-small">
          <p>ğŸ¨ KaÅŸ'taki otellerin resmi rehberi olmayÄ± hedefliyoruz.</p>
          <p>ğŸ¨ Tamamen Ã¼cretsiz listeleme - hiÃ§bir Ã¼cret Ã¶demezsiniz.</p>
          <p>ğŸ¨ Direkt rezervasyon linklerinizi (Booking, Airbnb vb.) paylaÅŸabilirsiniz.</p>
          <p>ğŸ¨ Instagram ve web sitenize doÄŸrudan yÃ¶nlendirme.</p>
          <p>ğŸ¨ Tesis Ã¶zelliklerinizi detaylÄ±ca tanÄ±tÄ±n.</p>
          <p>ğŸ¨ Bilgilerinizi istediÄŸiniz zaman gÃ¼ncelleyebilirsiniz.</p>
        </div>
      </details>

      <details class="accordion-item accordion info-acc">
        <summary class="section-title">
          <span class="section-icon icon-glow">â­</span>
          Neden KaÅŸ Guide'da OlmalÄ±sÄ±nÄ±z?
        </summary>

        <div class="liste-small">
          <p>â­ KaÅŸ'a gelen gezginlerin ilk uÄŸrak noktasÄ± oluyoruz.</p>
          <p>â­ Lokal ve otantik bir platform - bÃ¼yÃ¼k OTA'lara alternatif.</p>
          <p>â­ DoÄŸrudan rezervasyon linklerinizle komisyon kaybÄ±nÄ± azaltÄ±n.</p>
          <p>â­ Tesisinizin hikayesini ve Ã¶zelliklerini anlatÄ±n.</p>
          <p>â­ FotoÄŸraflarÄ±nÄ±zla misafirlerinizi cezbedebilirsiniz.</p>
          <p>â­ Yerel iÅŸletmeleri destekleyen bir topluluk.</p>
        </div>
      </details>

      <details class="accordion-item accordion info-acc">
        <summary class="section-title">
          <span class="section-icon icon-glow">ğŸ“</span>
          Form Doldurma Rehberi
        </summary>

        <div class="liste-small">
          <p>ğŸ“ TÃ¼m alanlarÄ± eksiksiz doldurun - daha fazla gÃ¶rÃ¼nÃ¼rlÃ¼k.</p>
          <p>ğŸ“ Otelinizin Ã¶zelliklerini detaylÄ± aÃ§Ä±klayÄ±n.</p>
          <p>ğŸ“ En iyi fotoÄŸraflarÄ±nÄ±zÄ± seÃ§in (maksimum 5 adet, 2MB).</p>
          <p>ğŸ“ Rezervasyon linkleri iÃ§in tam URL kullanÄ±n.</p>
          <p>ğŸ“ Ã–nizleme butonuyla sayfanÄ±zÄ±n nasÄ±l gÃ¶rÃ¼neceÄŸini kontrol edin.</p>
          <p>ğŸ“ BaÅŸvurunuz 1-3 iÅŸ gÃ¼nÃ¼ iÃ§inde incelenir ve yayÄ±nlanÄ±r.</p>
        </div>
      </details>

      <details class="accordion-item accordion info-acc">
        <summary class="section-title">
          <span class="section-icon icon-glow">ğŸ‘¥</span>
          Biz Kimiz?
        </summary>
        <div class="liste-small">
          <p style="margin: 0 0 0.75rem 0;">
            Biz, KaÅŸ'Ä± seven ve KaÅŸ'ta yaÅŸayan kÃ¼Ã§Ã¼k bir ekibiz. AmacÄ±mÄ±z, KaÅŸ'Ä± ziyaret eden gezginlere 
            en gÃ¼ncel ve gÃ¼venilir bilgileri sunmak. Otellere %100 Ã¼cretsiz listeleme sunarak, 
            yerel turizmi destekliyoruz.
          </p>

          <div class="contact-line" style="margin: 0.35rem 0;">
            <span>ğŸ“¸ Instagram:</span>
            <a href="https://instagram.com/guidekas" target="_blank" rel="noopener">@guidekas</a>
          </div>

          <div class="contact-line" style="margin: 0.35rem 0 0.75rem 0;">
            <span>âœ‰ï¸ E-posta:</span>
            <a href="mailto:hotels@kasguide.de">hotels@kasguide.de</a>
          </div>

          <div><strong>KaÅŸ Guide Hotels Ekibi</strong></div>
        </div>
      </details>
    </section>

    <!-- FORM -->
    <section class="card">
      <div class="success-message" id="successMessage">
        <div class="success-icon">âœ…</div>
        <h3>BaÅŸvurunuz AlÄ±ndÄ±!</h3>
        <p>Oteliniz hakkÄ±ndaki bilgileri inceliyoruz.</p>
        <p>1-3 iÅŸ gÃ¼nÃ¼ iÃ§inde size dÃ¶nÃ¼ÅŸ yapacaÄŸÄ±z.</p>
        <p>DesteÄŸiniz iÃ§in teÅŸekkÃ¼r ederiz!</p>
        <p><strong>KaÅŸ Guide Hotels</strong></p>
      </div>

      <form id="hotelForm" class="form" novalidate>

        <!-- TEMEL BÄ°LGÄ°LER -->
        <section class="form-box">
          <div class="form-box__head">
            <span class="form-ico">ğŸ¨</span>
            <span>Temel Bilgiler</span>
          </div>
          <div>
            <div class="form-group">
              <label class="form-label">Otel AdÄ±<span class="required">*</span></label>
              <input type="text" class="form-input" name="title" placeholder="Ã–rn: Mavi Deniz Butik Otel" required>
            </div>

            <div class="form-row">
              <div class="form-group">
                <label class="form-label">Otel Tipi<span class="required">*</span></label>
                <select class="form-input" name="hotelType" required>
                  <option value="">SeÃ§iniz...</option>
                  <option value="butik">Butik Otel</option>
                  <option value="aile">Aile Oteli</option>
                  <option value="luks">LÃ¼ks Otel</option>
                  <option value="pansiyon">Pansiyon</option>
                  <option value="apart">Apart Otel</option>
                  <option value="hostel">Hostel</option>
                  <option value="villa">Villa</option>
                  <option value="diger">DiÄŸer</option>
                </select>
              </div>

              <div class="form-group">
                <label class="form-label">YÄ±ldÄ±z SayÄ±sÄ±</label>
                <select class="form-input" name="starRating">
                  <option value="">SeÃ§iniz...</option>
                  <option value="5">â­â­â­â­â­ (5 YÄ±ldÄ±z)</option>
                  <option value="4">â­â­â­â­ (4 YÄ±ldÄ±z)</option>
                  <option value="3">â­â­â­ (3 YÄ±ldÄ±z)</option>
                  <option value="2">â­â­ (2 YÄ±ldÄ±z)</option>
                  <option value="1">â­ (1 YÄ±ldÄ±z)</option>
                  <option value="yok">BelirtilmemiÅŸ</option>
                </select>
              </div>
            </div>

            <div class="form-row">
              <div class="form-group">
                <label class="form-label">Oda SayÄ±sÄ±</label>
                <input type="number" class="form-input" name="roomCount" placeholder="Ã–rn: 12" min="1">
              </div>

              <div class="form-group">
                <label class="form-label">Toplam Kapasite</label>
                <input type="number" class="form-input" name="capacity" placeholder="Ã–rn: 30 kiÅŸi" min="1">
              </div>
            </div>

            <div class="form-group">
              <label class="form-label">Konum<span class="required">*</span></label>
              <input type="text" class="form-input" name="location" placeholder="Ã–rn: KaÅŸ Merkez / Kalkan" required>
            </div>

            <div class="form-group">
              <label class="form-label">Denize UzaklÄ±k</label>
              <input type="text" class="form-input" name="distanceToSea" placeholder="Ã–rn: 50 metre / YÃ¼rÃ¼me mesafesi / Sahilde">
            </div>

            <div class="form-group">
              <label class="form-label">KÄ±sa AÃ§Ä±klama<span class="required">*</span></label>
              <textarea class="form-textarea" name="description" placeholder="Otelinizi 1-2 cÃ¼mle ile tanÄ±tÄ±n (kart gÃ¶rÃ¼nÃ¼mÃ¼nde gÃ¶sterilecek)" required></textarea>
              <p class="form-hint">Bu metin arama sonuÃ§larÄ±nda gÃ¶sterilecek</p>
            </div>

            <div class="form-group">
              <label class="form-label">DetaylÄ± AÃ§Ä±klama<span class="required">*</span></label>
              <textarea class="form-textarea" name="longText" placeholder="Oteliniz hakkÄ±nda detaylÄ± bilgi verin: konsept, odalar, hizmetler, Ã§evre, Ã¶zel Ã¶zellikler..." style="min-height: 200px;" required></textarea>
              <p class="form-hint">Misafirlerinizin en Ã§ok merak ettiÄŸi bilgileri paylaÅŸÄ±n</p>
            </div>
          </div>
        </section>

        <!-- TESÄ°SLER & HÄ°ZMETLER -->
        <section class="form-box">
          <div class="form-box__head">
            <span class="form-ico">ğŸŠ</span>
            <span>Tesisler & Hizmetler</span>
          </div>
          <div>
            <label class="form-label">Otelinizde Bulunan Tesisler</label>
            <p class="form-hint" style="margin-bottom: 1rem;">Tesisinizde mevcut olan tÃ¼m Ã¶zellikleri iÅŸaretleyin</p>

            <div class="category-grid">
              <div class="category-option">
                <input type="checkbox" id="fac-pool" name="facilities" value="pool" class="category-checkbox">
                <label for="fac-pool" class="category-label">
                  <span class="category-icon">ğŸŠ</span>
                  <span class="category-name">Havuz</span>
                </label>
              </div>

              <div class="category-option">
                <input type="checkbox" id="fac-spa" name="facilities" value="spa" class="category-checkbox">
                <label for="fac-spa" class="category-label">
                  <span class="category-icon">ğŸ’†</span>
                  <span class="category-name">Spa</span>
                </label>
              </div>

              <div class="category-option">
                <input type="checkbox" id="fac-gym" name="facilities" value="gym" class="category-checkbox">
                <label for="fac-gym" class="category-label">
                  <span class="category-icon">ğŸ’ª</span>
                  <span class="category-name">Gym</span>
                </label>
              </div>

              <div class="category-option">
                <input type="checkbox" id="fac-restaurant" name="facilities" value="restaurant" class="category-checkbox">
                <label for="fac-restaurant" class="category-label">
                  <span class="category-icon">ğŸ½ï¸</span>
                  <span class="category-name">Restoran</span>
                </label>
              </div>

              <div class="category-option">
                <input type="checkbox" id="fac-bar" name="facilities" value="bar" class="category-checkbox">
                <label for="fac-bar" class="category-label">
                  <span class="category-icon">ğŸ¹</span>
                  <span class="category-name">Bar</span>
                </label>
              </div>

              <div class="category-option">
                <input type="checkbox" id="fac-beach" name="facilities" value="beach" class="category-checkbox">
                <label for="fac-beach" class="category-label">
                  <span class="category-icon">ğŸ–ï¸</span>
                  <span class="category-name">Plaj</span>
                </label>
              </div>

              <div class="category-option">
                <input type="checkbox" id="fac-wifi" name="facilities" value="wifi" class="category-checkbox">
                <label for="fac-wifi" class="category-label">
                  <span class="category-icon">ğŸ“¶</span>
                  <span class="category-name">WiFi</span>
                </label>
              </div>

              <div class="category-option">
                <input type="checkbox" id="fac-ac" name="facilities" value="ac" class="category-checkbox">
                <label for="fac-ac" class="category-label">
                  <span class="category-icon">â„ï¸</span>
                  <span class="category-name">Klima</span>
                </label>
              </div>

              <div class="category-option">
                <input type="checkbox" id="fac-parking" name="facilities" value="parking" class="category-checkbox">
                <label for="fac-parking" class="category-label">
                  <span class="category-icon">ğŸ…¿ï¸</span>
                  <span class="category-name">Otopark</span>
                </label>
              </div>

              <div class="category-option">
                <input type="checkbox" id="fac-garden" name="facilities" value="garden" class="category-checkbox">
                <label for="fac-garden" class="category-label">
                  <span class="category-icon">ğŸŒ³</span>
                  <span class="category-name">BahÃ§e</span>
                </label>
              </div>

              <div class="category-option">
                <input type="checkbox" id="fac-seaview" name="facilities" value="seaview" class="category-checkbox">
                <label for="fac-seaview" class="category-label">
                  <span class="category-icon">ğŸŒŠ</span>
                  <span class="category-name">Deniz ManzarasÄ±</span>
                </label>
              </div>

              <div class="category-option">
                <input type="checkbox" id="fac-breakfast" name="facilities" value="breakfast" class="category-checkbox">
                <label for="fac-breakfast" class="category-label">
                  <span class="category-icon">ğŸ³</span>
                  <span class="category-name">KahvaltÄ±</span>
                </label>
              </div>

              <div class="category-option">
                <input type="checkbox" id="fac-pet" name="facilities" value="petfriendly" class="category-checkbox">
                <label for="fac-pet" class="category-label">
                  <span class="category-icon">ğŸ•</span>
                  <span class="category-name">Pet-Friendly</span>
                </label>
              </div>

              <div class="category-option">
                <input type="checkbox" id="fac-transfer" name="facilities" value="transfer" class="category-checkbox">
                <label for="fac-transfer" class="category-label">
                  <span class="category-icon">ğŸš—</span>
                  <span class="category-name">Transfer</span>
                </label>
              </div>

              <div class="category-option">
                <input type="checkbox" id="fac-terrace" name="facilities" value="terrace" class="category-checkbox">
                <label for="fac-terrace" class="category-label">
                  <span class="category-icon">ğŸ¡</span>
                  <span class="category-name">Teras</span>
                </label>
              </div>

              <div class="category-option">
                <input type="checkbox" id="fac-kids" name="facilities" value="kids" class="category-checkbox">
                <label for="fac-kids" class="category-label">
                  <span class="category-icon">ğŸ‘¶</span>
                  <span class="category-name">Ã‡ocuk Dostu</span>
                </label>
              </div>
            </div>
          </div>
        </section>

        <!-- FÄ°YAT & REZERVASYON -->
        <section class="form-box">
          <div class="form-box__head">
            <span class="form-ico">ğŸ’°</span>
            <span>Fiyat & Rezervasyon</span>
          </div>
          <div>
            <div class="form-group">
              <label class="form-label">Fiyat AralÄ±ÄŸÄ± (Gecelik)</label>
              <select class="form-input" name="priceRange">
                <option value="">SeÃ§iniz...</option>
                <option value="budget">â‚º - Ekonomik (0-1000â‚º)</option>
                <option value="mid">â‚ºâ‚º - Orta (1000-2500â‚º)</option>
                <option value="high">â‚ºâ‚ºâ‚º - Ãœst (2500-5000â‚º)</option>
                <option value="luxury">â‚ºâ‚ºâ‚ºâ‚º - LÃ¼ks (5000â‚º+)</option>
              </select>
              <p class="form-hint">Ortalama Ã§ift kiÅŸilik oda fiyatÄ± (sezon iÃ§i)</p>
            </div>

            <div class="form-row">
              <div class="form-group">
                <label class="form-label">Check-in Saati</label>
                <input type="time" class="form-input" name="checkinTime" placeholder="14:00">
              </div>

              <div class="form-group">
                <label class="form-label">Check-out Saati</label>
                <input type="time" class="form-input" name="checkoutTime" placeholder="11:00">
              </div>
            </div>

            <div class="form-group">
              <label class="form-label">Rezervasyon Linki</label>
              <input type="url" class="form-input" name="booking" placeholder="https://booking.com/... veya https://airbnb.com/...">
              <p class="form-hint">Booking.com, Airbnb veya kendi rezervasyon sisteminizin linki</p>
            </div>

            <div class="form-group">
              <label class="form-label">Web Sitesi</label>
              <input type="url" class="form-input" name="website" placeholder="https://otelim.com">
            </div>
          </div>
        </section>

        <!-- Ä°LETÄ°ÅÄ°M -->
        <section class="form-box">
          <div class="form-box__head">
            <span class="form-ico">ğŸ“</span>
            <span>Ä°letiÅŸim Bilgileri</span>
          </div>
          <div>
            <div class="form-group">
              <label class="form-label">Telefon<span class="required">*</span></label>
              <input type="tel" class="form-input" name="phone" placeholder="+90 555 123 45 67" required>
              <p class="form-hint">Misafirlerinizin sizi arayabileceÄŸi numara</p>
            </div>

            <div class="form-group">
              <label class="form-label">E-posta<span class="required">*</span></label>
              <input type="email" class="form-input" name="email" placeholder="info@otelim.com" required>
              <p class="form-hint">Size ulaÅŸabileceÄŸimiz e-posta adresi</p>
            </div>

            <div class="form-group">
              <label class="form-label">Instagram</label>
              <input type="text" class="form-input" name="instagram" placeholder="@oteliniz">
            </div>

            <div class="form-group">
              <label class="form-label">Google Maps Arama Sorgusu</label>
              <input type="text" class="form-input" name="googleMapsQuery" placeholder="Mavi Deniz Butik Otel KaÅŸ">
              <p class="form-hint">Google Maps'te nasÄ±l aranmalÄ±? (Tam adÄ±nÄ±zÄ± yazÄ±n)</p>
            </div>
          </div>
        </section>

        <!-- FOTOÄRAFLAR -->
        <section class="form-box">
          <div class="form-box__head">
            <span class="form-ico">ğŸ“¸</span>
            <span>FotoÄŸraflar</span>
          </div>
          <div>
            <div class="form-group">
              <label class="form-label">Otel FotoÄŸraflarÄ± (Maksimum 5 adet)<span class="required">*</span></label>
              <input 
                type="file" 
                id="photoInput"
                class="form-input" 
                name="photos" 
                accept="image/jpeg,image/png,image/webp" 
                multiple
                required
              >
              <p class="form-hint">
                JPG, PNG veya WEBP formatÄ±nda, her biri maksimum 2 MB. 
                Ä°lk fotoÄŸraf kapak fotoÄŸrafÄ± olarak kullanÄ±lacak.
              </p>
              <div id="photoFileNames" class="file-names">HenÃ¼z dosya seÃ§ilmedi</div>
              <div id="photoError" class="error-text"></div>
            </div>
          </div>
        </section>

        <!-- EK NOTLAR -->
        <section class="form-box">
          <div class="form-box__head">
            <span class="form-ico">ğŸ“Œ</span>
            <span>Ek Notlar</span>
          </div>
          <div>
            <div class="form-group">
              <textarea
                class="form-textarea"
                name="extraNotes"
                placeholder="Ã–zellikle belirtmek istediÄŸiniz detaylar, Ã¶zel kampanyalar, sezonluk bilgiler veya istekleriniz..."
                style="min-height: 120px;"
              ></textarea>
              <p class="form-hint">Bu alan isteÄŸe baÄŸlÄ±dÄ±r</p>
            </div>
          </div>
        </section>

        <!-- BUTONLAR -->
        <div class="actions actions--stack">
          <button type="button" class="btn btn--wide btn--preview" id="previewBtn">ğŸ‘€ Ã–nizleme</button>
          <button type="submit" class="btn btn--wide btn--submit">ğŸš€ BaÅŸvuruyu GÃ¶nder</button>
        </div>

        <p class="form-footnote">
          BaÅŸvurunuzu gÃ¶nderdikten sonra 1-3 iÅŸ gÃ¼nÃ¼ iÃ§inde size dÃ¶nÃ¼ÅŸ yapacaÄŸÄ±z.
        </p>
      </form>

      <div class="build-note">build 2812251820 - hotels by borntobewild</div>
    </section>
  </main>

<script>
  // Form submission
  const form = document.getElementById('hotelForm');
  const successMessage = document.getElementById('successMessage');

  form.addEventListener('submit', async (e) => {
    e.preventDefault();

    const submitBtn = form.querySelector('button[type="submit"]');
    submitBtn.disabled = true;
    submitBtn.innerText = 'GÃ¶nderiliyor...';

    const formData = new FormData(form);

    try {
      const res = await fetch('/api/hotel-submit', {
        method: 'POST',
        body: formData
      });

      const raw = await res.text().catch(() => '');
      let payload = null;
      try { payload = JSON.parse(raw); } catch {}

      if (!res.ok) {
        throw new Error(payload?.message || raw || `HTTP ${res.status}`);
      }

      if (payload && payload.success === false) {
        throw new Error(payload.message || 'Mail gÃ¶nderilemedi');
      }

      successMessage.classList.add('show');
      form.reset();
      window.scrollTo({ top: 0, behavior: 'smooth' });

    } catch (err) {
      alert(
        'BaÅŸvuru gÃ¶nderilemedi.\n\n' +
        (err.message || 'Sunucu hatasÄ±')
      );
    } finally {
      submitBtn.disabled = false;
      submitBtn.innerText = 'ğŸš€ BaÅŸvuruyu GÃ¶nder';
    }
  });
</script>

<script>
  // Preview functionality
  (function () {
    const previewBtn = document.getElementById('previewBtn');
    const formEl = document.getElementById('hotelForm');
    if (!formEl) return;

    function formToObject(formEl) {
      const fd = new FormData(formEl);
      const obj = {};
      for (const [k, v] of fd.entries()) {
        if (k === "facilities") {
          obj.facilities ??= [];
          obj.facilities.push(v);
        } else if (k === "photos") {
          // Skip files in preview
        } else {
          obj[k] = (v ?? "").toString().trim();
        }
      }
      return obj;
    }

    function buildPreviewHotel(data) {
      return {
        title: data.title || "Otel AdÄ±",
        hotelType: data.hotelType || "",
        starRating: data.starRating || "",
        roomCount: data.roomCount || "",
        capacity: data.capacity || "",
        location: data.location || "KaÅŸ",
        distanceToSea: data.distanceToSea || "",
        description: data.description || "",
        longText: data.longText || "",
        facilities: data.facilities || [],
        priceRange: data.priceRange || "",
        checkinTime: data.checkinTime || "",
        checkoutTime: data.checkoutTime || "",
        booking: data.booking || "",
        website: data.website || "",
        phone: data.phone || "",
        email: data.email || "",
        instagram: data.instagram || "",
        googleMapsQuery: data.googleMapsQuery || ""
      };
    }

    function persistDraft() {
      const data = formToObject(formEl);
      const previewHotel = buildPreviewHotel(data);
      try {
        localStorage.setItem("kasguide_preview_hotel", JSON.stringify(previewHotel));
      } catch (e) {}
    }

    const liveEvents = ["input", "change"];
    liveEvents.forEach(evt => {
      formEl.addEventListener(evt, (e) => {
        if (e?.target?.type === "file") return;
        persistDraft();
      });
    });

    previewBtn?.addEventListener('click', () => {
      persistDraft();
      window.open("./example-hotel/example-hotel.html", "_blank");
    });

    persistDraft();
  })();
</script>

<script>
  // File input handler
  (function () {
    const input = document.getElementById("photoInput");
    const namesEl = document.getElementById("photoFileNames");
    const errEl = document.getElementById("photoError");
    const formEl = document.getElementById("hotelForm");

    if (!input || !namesEl) return;

    const MAX_FILES = 5;
    const MAX_MB_PER_FILE = 2;
    const MAX_BYTES_PER_FILE = MAX_MB_PER_FILE * 1024 * 1024;

    function formatBytes(bytes) {
      if (!Number.isFinite(bytes)) return "";
      const mb = bytes / (1024 * 1024);
      if (mb >= 1) return `${mb.toFixed(2)} MB`;
      const kb = bytes / 1024;
      return `${kb.toFixed(0)} KB`;
    }

    function updateUI() {
      const files = Array.from(input.files || []);
      if (errEl) errEl.textContent = "";

      if (files.length === 0) {
        namesEl.textContent = "HenÃ¼z dosya seÃ§ilmedi";
        return;
      }

      const errors = [];
      if (files.length > MAX_FILES) {
        errors.push(`En fazla ${MAX_FILES} fotoÄŸraf seÃ§ebilirsiniz.`);
      }

      const tooBig = files.filter(f => (f.size || 0) > MAX_BYTES_PER_FILE);
      if (tooBig.length) {
        const list = tooBig.map(f => f.name).slice(0, 3).join(", ");
        errors.push(`2 MB sÄ±nÄ±rÄ±nÄ± aÅŸan fotoÄŸraf(lar) var: ${list}${tooBig.length > 3 ? "..." : ""}`);
      }

      const totalBytes = files.reduce((sum, f) => sum + (f.size || 0), 0);
      const fileNames = files.map(f => f.name).join(" â€¢ ");

      namesEl.innerHTML = `<div class="file-summary">${files.length} fotoÄŸraf seÃ§ildi â€¢ Toplam: ${formatBytes(totalBytes)}</div>` +
        `<div class="file-list">${fileNames}</div>`;

      if (errors.length && errEl) {
        errEl.textContent = errors.join(" ");
      }
    }

    input.addEventListener("change", updateUI);

    formEl?.addEventListener("reset", () => {
      setTimeout(() => {
        namesEl.textContent = "HenÃ¼z dosya seÃ§ilmedi";
        if (errEl) errEl.textContent = "";
      }, 50);
    });
  })();
</script>

</body>
</html>
